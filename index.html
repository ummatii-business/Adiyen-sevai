<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Car Racing Game</title>
  <style>
    body { margin: 0; overflow: hidden; background: #111; }
    canvas { display: block; margin: auto; background: #333; }
  </style>
</head>
<body>
<canvas id="gameCanvas" width="400" height="600"></canvas>
<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let roadWidth = 200;
let laneX = (canvas.width - roadWidth) / 2;
let player = { x: laneX + roadWidth/2 - 20, y: 500, w: 40, h: 80, speed: 5 };
let enemies = [];
let keys = {};
let score = 0;
let gameOver = false;

// Controls
document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

// Spawn enemy cars
function spawnEnemy(){
  let lane = Math.floor(Math.random()*3);
  let x = laneX + lane*(roadWidth/3) + 10;
  enemies.push({x:x,y:-100,w:40,h:80,speed:4+Math.random()*3});
}
setInterval(spawnEnemy, 1500);

// Draw road + lanes
function drawRoad(){
  ctx.fillStyle = "#555";
  ctx.fillRect(laneX,0,roadWidth,canvas.height);
  ctx.strokeStyle = "#fff";
  ctx.lineWidth = 5;
  ctx.strokeRect(laneX,0,roadWidth,canvas.height);

  // lane dividers
  ctx.strokeStyle = "#fff";
  ctx.lineWidth = 2;
  for(let i=0;i<canvas.height;i+=40){
    ctx.beginPath();
    ctx.moveTo(laneX+roadWidth/3, i);
    ctx.lineTo(laneX+roadWidth/3, i+20);
    ctx.moveTo(laneX+2*roadWidth/3, i);
    ctx.lineTo(laneX+2*roadWidth/3, i+20);
    ctx.stroke();
  }
}

// Draw car
function drawCar(car,color){
  ctx.fillStyle=color;
  ctx.fillRect(car.x,car.y,car.w,car.h);
}

// Game loop
function update(){
  if(gameOver){
    ctx.fillStyle="rgba(0,0,0,0.7)";
    ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle="#fff";
    ctx.font="30px Arial";
    ctx.fillText("GAME OVER",110,250);
    ctx.font="20px Arial";
    ctx.fillText("Score: "+score,150,300);
    ctx.fillText("Press SPACE to Restart",80,350);
    if(keys[" "]){
      location.reload();
    }
    return;
  }

  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawRoad();

  // Player movement
  if(keys["ArrowLeft"] && player.x > laneX) player.x -= player.speed;
  if(keys["ArrowRight"] && player.x < laneX+roadWidth-player.w) player.x += player.speed;
  if(keys["ArrowUp"] && player.y > 0) player.y -= player.speed;
  if(keys["ArrowDown"] && player.y < canvas.height-player.h) player.y += player.speed;

  drawCar(player,"#00ffcc");

  // Enemies
  for(let e of enemies){
    e.y += e.speed;
    drawCar(e,"#ff4444");
    // Collision check
    if(e.x < player.x+player.w && e.x+e.w > player.x &&
       e.y < player.y+player.h && e.y+e.h > player.y){
      gameOver = true;
    }
  }
  enemies = enemies.filter(e => e.y < canvas.height+100);

  // Score
  score++;
  ctx.fillStyle="#fff";
  ctx.font="20px Arial";
  ctx.fillText("Score: "+score,20,30);

  requestAnimationFrame(update);
}

update();
</script>
</body>
</html>
